# 随机色图

## API v1

```http
GET https://api.lolicon.app/setu/v1
```

### 请求

| 字段名     | 必须  |    默认值    | 说明                                                                                                                  |
| ---------- | :---: | :----------: | --------------------------------------------------------------------------------------------------------------------- |
| `r18`      |   ×   |     `0`      | `0`为非 R18，`1`为 R18，`2`为混合                                                                                     |
| `keyword`  |   ×   |              | 若指定关键字，将会返回从插画标题、作者、标签中模糊搜索的结果                                                          |
| `num`      |   ×   |     `1`      | 一次返回的结果数量，范围为`1`到`100`；在指定关键字的情况下，结果数量可能会不足指定的数量                              |
| `proxy`    |   ×   | `i.pixiv.re` | 设置返回的原图链接的域名，你也可以设置为`disable`来得到真正的原图链接<span class="expm"><sup>[1]</sup></span>         |
| `size1200` |   ×   |   `false`    | 是否使用 master_1200 缩略图，即长或宽最大为 1200px 的缩略图，以节省流量或提升加载速度（某些原图的大小可以达到十几MB） |

<span class="expm">[1]</span> 由于P站原图域名 `i.pximg.net` 具有防盗链措施，不含 `www.pixiv.net` referer 的请求均会返回 403，所以如果需要直接在网页上展示或在客户端上直接下载必须依靠反代服务。

### 响应

| 字段名  | 数据类型  | 说明                       |
| ------- | :-------: | -------------------------- |
| `code`  |   `int`   | 返回码，可能值详见后续部分 |
| `msg`   | `string`  | 错误信息之类的             |
| `count` |   `int`   | 结果数                     |
| `data`  | `setu []` | 色图数组                   |

#### setu

| 字段名   |  数据类型   | 说明                                                      |
| -------- | :---------: | --------------------------------------------------------- |
| `pid`    |    `int`    | 作品 pid                                                  |
| `p`      |    `int`    | 作品所在页                                                |
| `uid`    |    `int`    | 作者 uid                                                  |
| `title`  |  `string`   | 作品标题                                                  |
| `author` |  `string`   | 作者名（入库时，并过滤掉 @ 及其后内容）                   |
| `r18`    |  `boolean`  | 是否 R18（在色图库中的分类，并非作者标识的 R18）          |
| `width`  |    `int`    | 原图宽度 px                                               |
| `height` |    `int`    | 原图高度 px                                               |
| `tags`   | `string []` | 作品标签，包含标签的中文翻译（有的话）                    |
| `url`    |  `string`   | 图片链接（可能存在有些作品因修改或删除而导致 404 的情况） |

#### code

| 值    | 说明                            |
| ----- | ------------------------------- |
| `-1`  | 内部错误，请向 i@loli.best 反馈 |
| `0`   | 成功                            |
| `404` | 找不到符合关键字的色图          |
